<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1.0,
                 maximum-scale=1.0,
                 user-scalable=no">

  <title>AR Fire Safety Training Module</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- AR.js (STABLE VERSION) -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #000;
      touch-action: manipulation;
      font-family: Arial, sans-serif;
    }

    #ui {
      position: fixed;
      left: 0;
      right: 0;
      bottom: env(safe-area-inset-bottom);
      text-align: center;
      z-index: 999;
      padding: 6px 0;
    }

    #ui-inner {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    button {
      padding: 12px 16px;
      margin: 4px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      background: linear-gradient(135deg,#d32f2f,#b71c1c);
      color: white;
      box-shadow: 0 4px 8px rgba(0,0,0,.35);
    }
  </style>

  <script>
    AFRAME.registerComponent('auto-rotate', {
      tick() {
        this.el.object3D.rotation.y += 0.003;
      }
    });

    function hideAll() {
      ext.setAttribute('visible', false);
      alarm.setAttribute('visible', false);
      smoke.setAttribute('visible', false);
    }

    function showExtinguisher() {
      hideAll();
      ext.setAttribute('visible', true);
      info.setAttribute('value',
`ðŸ§¯ FIRE EXTINGUISHER

PASS Method:
P â€“ Pull the pin
A â€“ Aim at base
S â€“ Squeeze handle
S â€“ Sweep side to side`);
    }

    function showAlarm() {
      hideAll();
      alarm.setAttribute('visible', true);
      info.setAttribute('value',
`ðŸš¨ FIRE ALARM

1. Press the alarm
2. Alert people
3. Evacuate immediately`);
    }

    function showSmoke() {
      hideAll();
      smoke.setAttribute('visible', true);
      info.setAttribute('value',
`ðŸŒ« SMOKE DETECTOR

â€¢ Detects smoke early
â€¢ Triggers alarm automatically`);
    }

    window.onload = () => {
      ext = document.querySelector('#ext');
      alarm = document.querySelector('#alarm');
      smoke = document.querySelector('#smoke');
      info = document.querySelector('#info');
    };
  </script>
</head>

<body>

<!-- UI -->
<div id="ui">
  <div id="ui-inner">
    <button onclick="showExtinguisher()">ðŸ§¯ Extinguisher</button>
    <button onclick="showAlarm()">ðŸš¨ Alarm</button>
    <button onclick="showSmoke()">ðŸŒ« Smoke</button>
  </div>
</div>

<a-scene
  embedded
  vr-mode-ui="enabled: false"
  arjs="debugUIEnabled: false;">

  <a-assets>
    <a-asset-item id="extModel" src="fire_extinguisher.glb"></a-asset-item>
    <a-asset-item id="alarmModel" src="fire_alarm.glb"></a-asset-item>
    <a-asset-item id="smokeModel" src="apollo_smoke_detector.glb"></a-asset-item>
  </a-assets>

  <a-marker preset="hiro">

    <a-entity id="ext"
              gltf-model="#extModel"
              scale="9 9 9"
              visible="true"
              auto-rotate></a-entity>

    <a-entity id="alarm"
              gltf-model="#alarmModel"
              scale="0.25 0.25 0.25"
              visible="false"
              auto-rotate></a-entity>

    <a-entity id="smoke"
              gltf-model="#smokeModel"
              scale="0.4 0.4 0.4"
              visible="false"
              auto-rotate></a-entity>

    <a-plane position="3 2 0"
             width="4"
             height="2.3"
             color="#fff"
             opacity="0.95"></a-plane>

    <a-text id="info"
            value="ðŸ§¯ FIRE EXTINGUISHER"
            align="left"
            color="#000"
            position="1.2 2.1 0.1"
            width="3.6"></a-text>

  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

</body>
</html>
