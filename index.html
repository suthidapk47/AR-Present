<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <title>AR Fire Safety Training Module</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: #000;
    }

    #ui {
      position: fixed;
      bottom: 20px;
      left: 0;
      width: 100%;
      text-align: center;
      z-index: 10;
      pointer-events: none;
    }

    #ui-inner {
      pointer-events: auto;
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    button {
      padding: 10px 18px;
      font-size: 14px;
      border-radius: 20px;
      border: none;
      background: rgba(211,47,47,0.9);
      color: white;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
  </style>

  <script>
    AFRAME.registerComponent('auto-rotate', {
      tick() {
        this.el.object3D.rotation.y += 0.01;
      }
    });

    function hideAll() {
      ext.setAttribute('visible', false);
      alarm.setAttribute('visible', false);
      smoke.setAttribute('visible', false);
    }

    function showExtinguisher() {
      hideAll();
      ext.setAttribute('visible', true);
      info.setAttribute('value',
`FIRE EXTINGUISHER

PURPOSE:
Control small fires

PASS METHOD:
P - Pull pin
A - Aim at base
S - Squeeze handle
S - Sweep side to side`);
    }

    function showAlarm() {
      hideAll();
      alarm.setAttribute('visible', true);
      info.setAttribute('value',
`FIRE ALARM

PURPOSE:
Alert everyone

ACTION:
1. Press alarm
2. Warn people
3. Evacuate`);
    }

    function showSmoke() {
      hideAll();
      smoke.setAttribute('visible', true);
      info.setAttribute('value',
`SMOKE DETECTOR

PURPOSE:
Detect smoke early

NOTE:
â€¢ Automatic alert
â€¢ Do not cover`);
    }

    window.onload = () => {
      ext = document.querySelector('#ext');
      alarm = document.querySelector('#alarm');
      smoke = document.querySelector('#smoke');
      info = document.querySelector('#info');
    };
  </script>
</head>

<body>

<div id="ui">
  <div id="ui-inner">
    <button onclick="showExtinguisher()">ðŸ§¯ Extinguisher</button>
    <button onclick="showAlarm()">ðŸš¨ Alarm</button>
    <button onclick="showSmoke()">ðŸŒ« Detector</button>
  </div>
</div>

<a-scene
  embedded
  vr-mode-ui="enabled: false"
  arjs="debugUIEnabled: false;">

  <a-assets>
    <a-asset-item id="extModel" src="fire_extinguisher.glb"></a-asset-item>
    <a-asset-item id="alarmModel" src="fire_alarm.glb"></a-asset-item>
    <a-asset-item id="smokeModel" src="apollo_smoke_detector.glb"></a-asset-item>
  </a-assets>

  <a-marker preset="hiro">

    <a-entity light="type: ambient; color: #BBB"></a-entity>
    <a-entity light="type: directional; intensity: 0.6" position="-0.5 1 1"></a-entity>

    <a-entity id="ext" gltf-model="#extModel" scale="9 9 9" auto-rotate></a-entity>
    <a-entity id="alarm" gltf-model="#alarmModel" scale="0.1 0.1 0.1" visible="false" auto-rotate></a-entity>
    <a-entity id="smoke" gltf-model="#smokeModel" scale="0.5 0.5 0.5" visible="false" auto-rotate></a-entity>

    <!-- INFO PANEL -->
    <a-entity position="2 1 0">
      <a-plane width="2.8" height="2.2" color="#000" opacity="0.85"></a-plane>

      <a-text id="info"
              value="Select an item"
              align="left"
              color="#FFF"
              width="2.5"
              wrap-count="26"
              position="-1 0 0.05">
      </a-text>
    </a-entity>

  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

</body>
</html>
