<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <!-- ðŸ”’ LOCK ZOOM & SUPPORT PORTRAIT -->
  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1.0,
                 maximum-scale=1.0,
                 user-scalable=no">

  <title>AR Fire Safety Training Module</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      touch-action: manipulation;
      overscroll-behavior: none;
      font-family: Arial, sans-serif;
      background: #000;
    }

    /* ---------- UI CONTAINER ---------- */
    #ui {
      position: fixed;
      left: 0;
      right: 0;
      bottom: env(safe-area-inset-bottom);
      padding-bottom: 8px;
      text-align: center;
      z-index: 999;
      pointer-events: auto;
    }

    #ui-inner {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    button {
      padding: 12px 16px;
      margin: 4px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      background: linear-gradient(135deg,#d32f2f,#b71c1c);
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,.35);
    }

    /* Hint text */
    #hint {
      position: fixed;
      top: env(safe-area-inset-top);
      width: 100%;
      text-align: center;
      font-size: 12px;
      color: #fff;
      z-index: 999;
      text-shadow: 0 2px 4px rgba(0,0,0,.6);
      padding-top: 6px;
    }
  </style>

  <script>
    /* Auto rotate models */
    AFRAME.registerComponent('auto-rotate', {
      tick() {
        this.el.object3D.rotation.y += 0.003;
      }
    });

    function hideAll() {
      document.querySelector('#ext').setAttribute('visible', false);
      document.querySelector('#alarm').setAttribute('visible', false);
      document.querySelector('#smoke').setAttribute('visible', false);
    }

    function showExtinguisher() {
      hideAll();
      document.querySelector('#ext').setAttribute('visible', true);
      document.querySelector('#info').setAttribute('value',
`ðŸ§¯ FIRE EXTINGUISHER

Purpose:
Used to control small fires.

PASS Method:
P â€“ Pull the safety pin
A â€“ Aim at the base of fire
S â€“ Squeeze the handle
S â€“ Sweep side to side

Warning:
Do NOT use on large fires.`
      );
    }

    function showAlarm() {
      hideAll();
      document.querySelector('#alarm').setAttribute('visible', true);
      document.querySelector('#info').setAttribute('value',
`ðŸš¨ FIRE ALARM

Purpose:
Alerts people during a fire emergency.

How to use:
1. Break the glass or press the button
2. Alarm will sound loudly
3. Evacuate immediately

Never ignore an alarm.`
      );
    }

    function showSmoke() {
      hideAll();
      document.querySelector('#smoke').setAttribute('visible', true);
      document.querySelector('#info').setAttribute('value',
`ðŸŒ« SMOKE DETECTOR

Purpose:
Detects smoke and fire early.

How it works:
â€¢ Detects smoke particles
â€¢ Triggers alarm automatically
â€¢ Warns occupants early

Important:
Never cover or disable it.`
      );
    }
  </script>
</head>

<body>

<!-- TOP HINT -->
<div id="hint">ðŸ“± Designed for portrait mode</div>

<!-- UI BUTTONS -->
<div id="ui">
  <div id="ui-inner">
    <button onclick="showExtinguisher()">ðŸ§¯ Extinguisher</button>
    <button onclick="showAlarm()">ðŸš¨ Alarm</button>
    <button onclick="showSmoke()">ðŸŒ« Smoke Detector</button>
  </div>
</div>

<a-scene
  embedded
  vr-mode-ui="enabled: false"
  renderer="precision: mediump; antialias: true;"
  arjs="sourceType: webcam;
        debugUIEnabled: false;
        displayWidth: window.innerWidth;
        displayHeight: window.innerHeight;">

  <!-- ASSETS -->
  <a-assets>
    <a-asset-item id="extModel" src="fire_extinguisher.glb"></a-asset-item>
    <a-asset-item id="alarmModel" src="fire_alarm.glb"></a-asset-item>
    <a-asset-item id="smokeModel" src="apollo_smoke_detector.glb"></a-asset-item>
  </a-assets>

  <!-- MARKER -->
  <a-marker preset="hiro">

    <!-- MODELS -->
    <a-entity id="ext"
              gltf-model="#extModel"
              scale="9 9 9"
              visible="true"
              auto-rotate></a-entity>

    <a-entity id="alarm"
              gltf-model="#alarmModel"
              scale="0.25 0.25 0.25"
              visible="false"
              auto-rotate></a-entity>

    <a-entity id="smoke"
              gltf-model="#smokeModel"
              scale="0.4 0.4 0.4"
              visible="false"
              auto-rotate></a-entity>

    <!-- INFO PANEL -->
    <a-plane position="3 2 0"
             width="4"
             height="2.4"
             color="#ffffff"
             opacity="0.95"></a-plane>

    <a-text id="info"
            value="ðŸ§¯ FIRE EXTINGUISHER

Purpose:
Used to control small fires.

PASS Method:
P â€“ Pull the pin
A â€“ Aim at the base
S â€“ Squeeze the handle
S â€“ Sweep side to side"
            align="left"
            color="#000000"
            position="1.2 2.2 0.1"
            width="3.6"
            line-height="50">
    </a-text>

  </a-marker>

  <!-- CAMERA -->
  <a-entity camera></a-entity>

</a-scene>

</body>
</html>
